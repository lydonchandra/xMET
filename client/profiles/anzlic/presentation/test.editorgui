<gui>
  <title>ANZMet Lite SCV</title>
  <repeatedPage>
    <title>History &amp; Quality</title>
    <order>10</order>
    <item>
      <type>Label</type>
      <onDataChange>
        <setItem>
          <name>localScopeVar</name>
          <value>#</value>
        </setItem>
      </onDataChange>
      <name>$dataQualityScope</name>
      <visible>false</visible>
      <mandatory>false</mandatory>
      <columnSpan>-1</columnSpan>
    </item>
    <page>
      <title>Scope and History</title>
      <order>5</order>
      <labeledGroup>
        <visible>true</visible>
        <item>
          <title>Scope</title>
          <type>DropDownList</type>
          <param>
            <name>Editable</name>
            <value>false</value>
          </param>
          <param>
            <name>CodeList</name>
            <value>http://asdd.ga.gov.au/asdd/profileinfo/GAScopeCodeList.xml#MD_ScopeCode</value>
          </param>
          <defaultValue>
            <default>
              <type>text</type>
              <value>dataset</value>
            </default>
          </defaultValue>
          <xpath>$/gmd:DQ_DataQuality/gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode@codeListValue</xpath>
          <onDataChange>
            <codeBlock>
              <setxpath>
                <dest>$/gmd:DQ_DataQuality/gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode@codeList</dest>
                <value>http://asdd.ga.gov.au/asdd/profileinfo/GAScopeCodeList.xml#MD_ScopeCode</value>
              </setxpath>
            </codeBlock>
          </onDataChange>
          <name>^localScopeVar</name>
          <visible>true</visible>
          <description>The Scope of History and Quality (same as resource type)</description>
          <mandatory>false</mandatory>
          <columnSpan>-1</columnSpan>
        </item>
        <item>
          <title>Scope Description</title>
          <type>MultiLineText</type>
          <name>dataQualityScopeDescription_</name>
          <visible>true</visible>
          <description>needs to be filled in if anything other than "dataset" or "series" is selected</description>
          <mandatory>false</mandatory>
          <columnSpan>-1</columnSpan>
        </item>
        <label>Scope</label>
      </labeledGroup>
      <labeledGroup>
        <visible>true</visible>
        <item>
          <title>History</title>
          <type>MultiLineText</type>
          <xpath>$/gmd:DQ_DataQuality/gmd:lineage/gmd:LI_Lineage/gmd:statement/gco:CharacterString</xpath>
          <name>lineageStatement</name>
          <visible>true</visible>
          <description>Describe the lineage or how the Resource was created and the sources and processes that were used</description>
          <hover>enter the history of the resource</hover>
          <mandatory>false</mandatory>
          <columnSpan>15</columnSpan>
        </item>
        <label>History</label>
      </labeledGroup>
      <visible>true</visible>
    </page>
    <item>
      <type>Label</type>
      <defaultValue>
        <default>
          <type>text</type>
          <value>This section describes the history of the Resource and information about the quality of the Resource or parts of the Resource.</value>
        </default>
      </defaultValue>
      <visible>true</visible>
      <mandatory>false</mandatory>
      <columnSpan>-1</columnSpan>
    </item>
    <visible>true</visible>
    <onValidation>
      <codeBlock>
        <if>
          <base>%localScopeVar</base>
          <condition>equals</condition>
          <expression>dataset</expression>
          <code>
            <if>
              <base>$/gmd:DQ_DataQuality/gmd:lineage</base>
              <condition>present</condition>
              <code>
                <codeBlock>
                  <setValid>
                    <name>localScopeVar</name>
                  </setValid>
                </codeBlock>
              </code>
              <elseCode>
                <if>
                  <base>$/gmd:DQ_DataQuality/gmd:report</base>
                  <condition>present</condition>
                  <code>
                    <codeBlock>
                      <setValid>
                        <name>localScopeVar</name>
                      </setValid>
                    </codeBlock>
                  </code>
                  <elseCode>
                    <codeBlock>
                      <setValid>
                        <name>localScopeVar</name>
                        <validationError>If Scope is dataset then History or Quality Report must be present</validationError>
                      </setValid>
                    </codeBlock>
                  </elseCode>
                </if>
              </elseCode>
            </if>
          </code>
          <elseCode>
            <codeBlock>
              <setValid>
                <name>localScopeVar</name>
              </setValid>
            </codeBlock>
          </elseCode>
        </if>
      </codeBlock>
    </onValidation>
    <base>/gmd:MD_Metadata/gmd:dataQualityInfo</base>
  </repeatedPage>
</gui>